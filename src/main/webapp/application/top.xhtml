<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:p="http://primefaces.org/ui"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions" xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="../template/template-multipart.xhtml">

    <ui:define name="title">トップ</ui:define>

    <ui:define name="content">

        <div class="ui-g">
            <p:fieldset class="ui-g-5" toggleable="true" legend="SecurityContexから取得した権限情報">
                <h:panelGrid columns="2">
            名前：<h:outputText value="#{topBean.name}" />
            アドミン権限：<h:outputText value="#{topBean.adminRole}" />
            ユーザ権限：<h:outputText value="#{topBean.userRole}" />
                </h:panelGrid>
            </p:fieldset>

            <span class="ui-g-2" />

            <p:fieldset class="ui-g-5" legend="リクエストから取得した権限情報">
                <h:panelGrid columns="2">
            名前：<h:outputText value="#{request.userPrincipal.name}" />
            アドミン権限：<h:outputText value="#{request.isUserInRole('admin')}" />
            ユーザ権限：<h:outputText value="#{request.isUserInRole('user')}" />
                </h:panelGrid>
            </p:fieldset>
        </div>

        <div class="ui-g-12">
            <p:fieldset legend="Ajaxのサンプル" toggleable="true" collapsed="true" title="入力値を変えたら、自動で計算される">
                <h:inputText id="value1" value="#{topBean.value1}">
                    <f:ajax execute="value1 value2" event="change" listener="#{topBean.sum()}" render="sumedValue" />
                </h:inputText>
            ＋
            <h:inputText id="value2" value="#{topBean.value2}">
                    <f:ajax execute="value1 value2" event="change" listener="#{topBean.sum()}" render="sumedValue" />
                </h:inputText>
            ＝
            <h:outputText id="sumedValue" value="#{topBean.sumedValue}" />
            </p:fieldset>
        </div>

        <div>
            <p:commandButton icon="pi pi-download" title="ファイルダウンロード" actionListener="#{topBean.makeDownloadFile()}" ajax="false">
                <p:fileDownload value="#{topBean.downloadFile}" />
            </p:commandButton>
        </div>

        <div class="form-group">
            <h:outputLabel for="uploadfile" value="ファイルアップロード" />
            <div class="input-group">
                <div class="custom-file">
                    <h:inputFile id="uploadfile" class="custom-file-input" value="#{topBean.uploadedFile}" />
                    <h:outputLabel for="uploadfile" class="custom-file-label" data-browse="参照" value="ファイルを選んでね（ドラッグ＆ドロップも可）" />
                </div>
                <div class="input-group-append">
                    <h:button class="btn input-group-text mr-3" id="uploadfile-cancel" value="Cancel" onclick="deleteUploadFile('uploadfile')" />
                    <p:commandButton icon="pi pi-upload" title="ファイルアップロード" action="#{topBean.uploadFile()}" ajax="false" />
                </div>
            </div>

        </div>

        <fieldset>
            <legend>住所</legend>

            <span class="p-country-name" style="display: none;">Japan</span>
            <div class="row my-2">
                <p:outputLabel class="col-3" for="postal-code" value="郵便番号" />
                <p:inputText id="postal-code" class="p-postal-code col-6" placeholder="1234567" onkeyup="AjaxZip3.zip2addr(this,'','都道府県','市区町村','その他住所');" />
            </div>
            <div class="row my-2">
                <p:outputLabel class="col-3" for="region" value="都道府県" />
                <p:inputText id="region" class="p-region col-6" placeholder="広島県" name="都道府県" />
            </div>
            <div class="row my-2">
                <p:outputLabel class="col-3" for="locality" value="市区町村" />
                <p:inputText id="locality" class="p-locality col-6" placeholder="広島市中区" name="市区町村" />
            </div>
            <div class="row my-2">
                <p:outputLabel class="col-3" for="street-address" value="その他住所" />
                <p:inputText id="street-address" class="p-street-address p-extended-address col-6" placeholder="大手町" name="その他住所" />
            </div>
        </fieldset>

        <br /><br /><br /><br /><br /><br /><br />

        <script src="https://yubinbango.github.io/yubinbango/yubinbango.js" charset="UTF-8" />

    </ui:define>
</ui:composition>

</html>
