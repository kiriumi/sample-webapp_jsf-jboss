<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:p="http://primefaces.org/ui"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions" xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="../template/template-multipart.xhtml">

    <ui:define name="title">トップ</ui:define>

    <ui:define name="content">

        <fieldset>
            <legend>SecurityContexから取得した権限情報</legend>
            <h:panelGrid columns="2">
            名前：<h:outputText value="#{topBean.name}" />
            アドミン権限：<h:outputText value="#{topBean.adminRole}" />
            ユーザ権限：<h:outputText value="#{topBean.userRole}" />
            </h:panelGrid>
        </fieldset>

        <br />

        <fieldset>
            <legend>リクエストから取得した権限情報</legend>
            <h:panelGrid columns="2">
            名前：<h:outputText value="#{request.userPrincipal.name}" />
            アドミン権限：<h:outputText value="#{request.isUserInRole('admin')}" />
            ユーザ権限：<h:outputText value="#{request.isUserInRole('user')}" />
            </h:panelGrid>
        </fieldset>

        <br />

        <fieldset>
            <legend>Ajaxのサンプル（入力値を変えたら、自動で計算される）</legend>
            <h:inputText id="value1" value="#{topBean.value1}">
                <f:ajax execute="value1 value2" event="change" listener="#{topBean.sum()}" render="sumedValue" />
            </h:inputText>
            ＋
            <h:inputText id="value2" value="#{topBean.value2}">
                <f:ajax execute="value1 value2" event="change" listener="#{topBean.sum()}" render="sumedValue" />
            </h:inputText>
            ＝
            <h:outputText id="sumedValue" value="#{topBean.sumedValue}" />
        </fieldset>

        <br />

        <h:commandButton class="btn btn-primary" value="ファイルダウンロード" actionListener="#{topBean.makeDownloadFile()}">
            <p:fileDownload value="#{topBean.downloadFile}" />
            <o:skipValidators />
        </h:commandButton>

        <br />

        <div class="input-group">
            <div class="custom-file">
                <h:inputFile id="uploadfile" value="#{topBean.uploadedFile}" />

            </div>
            <div class="input-group-append">
                <h:commandButton class="btn btn-primary" value="ファイルアップロード" action="#{topBean.uploadFile()}">
                    <o:skipValidators />
                </h:commandButton>
            </div>
        </div>

        <div>
            <span class="p-country-name" style="display:none;">Japan</span>
            <p:outputLabel for="postal-code" value="郵便番号" />
            <p:inputText id="postal-code" class="p-postal-code" onkeyup="AjaxZip3.zip2addr(this,'','都道府県','市区町村','その他住所');" />
            <br />

            <p:outputLabel for="region" value="都道府県" />
            <p:inputText id="region" class="p-region" name="都道府県" />
            <br />

            <p:outputLabel for="locality" value="市区町村" />
            <p:inputText id="locality" class="p-locality" name="市区町村" />
            <br />

            <p:outputLabel for="street-address" value="その他住所" />
            <p:inputText id="street-address" class="p-street-address p-extended-address" name="その他住所" />
        </div>

        <script src="https://yubinbango.github.io/yubinbango/yubinbango.js" charset="UTF-8" />

    </ui:define>
</ui:composition>

</html>
